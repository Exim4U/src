                        Notes For FreeBSD Users

These notes provide guidance for installing and running Exim4U on FreeBSD systems.
As stated elsewhere in these instructions, Exim4U was originally developed under
the RedHat/CentOS version of Linux, however, it has been installed and found to
work well on other Linux and Unix systems including Debian, Ubuntu and FreeBSD.

Proceed by following the instructions in the README, INSTALL, SPAMASSASSIN,
WEBMAIL, APPEARANCE and NOTES files, however, be aware that there are differences
in the FreeBSD file system as opposed to the RedHat/CentOS file system for which
those instructions were written. These notes will cover the most significant
differences and hopefully allow a smooth installation of Exim4u on your FreeBSD
system.

1) Installing application software from the ports collection.

All of the application software that is referenced in the README and INSTALL
file instructions is available from the FreeBSD ports collection and should
therefore be compiled and installed from there. Each software title may be
located by searching the ports collection using any of the following commands:

	make search name=<package name>    (from the /usr/ports directory)
	whereis <package name>
	locate <package-name> | grep ports

Then, when each package is found, change directory to the appropriate ports
directory and compile and install using "make install clean".


2) EXIM

The Exim package that should be compiled and installed from the FreeBSD Ports
Collection is named "exim-mysql" and is located at /usr/ports/mail/exim-mysql.
This version of exim includes MySQL, however you also need to include SQLite.
To do this, modify the Make file (/usr/ports/mail/exim-mysql/Makefile) to include
this line:

	WITH_SQLITE = YES

Therefore, the /usr/ports/mail/exim-mysql/Makefile should read as follows:

	# New ports collection makefile for:	exim-mysql 
	# Date created:				11 Jun 2001 
	# Whom:					Sheldon Hearn <sheldonh@FreeBSD.org> 
	# 
	# $FreeBSD: ports/mail/exim-mysql/Makefile,v 1.3 2001/06/14 21:37:17 sheldonh Exp $ 
	# 
	PKGNAMESUFFIX=	-mysql 
	MASTERDIR=	${.CURDIR}/../exim 
	WITH_MYSQL=	yes 
	#
	# Also include sqlite3
	WITH_SQLITE=	yes
	#
	.include "${MASTERDIR}/Makefile"

If this is a new installation, then compile and install as follows:

	make install clean

If this is a reinstallation, then deinstall, compile and install as follows:

	make deinstall clean
	make install clean






From DEBIAN file: Need to modify the following:


To install Exim from the Debian/Ubuntu repository:

sudo apt-get install exim4-base
sudo apt-get install exim4-daemon-heavy

These commands should setup and install the following packages:

	exim4-config
	exim4-base
	exim4-daemon-heavy
	exim4

The version of Exim in the Debian/Ubuntu repositories as of this writing was 4.69
whereas Exim4U version 1.2.x requires Exim version 4.71 for complete functionality.
However, the only functionality that is lost with Exim 4.69 is DKIM signing and
verification. See the file, EXIM_4.69, which includes instructions for modifying
Exim4U version 1.2.x to run with Exim version 4.69. (Alternatively, you may compile
Exim 4.71 from scratch on your Debian/Ubuntu system if you want DKIM signing and
verification features.)

The Debian distribution has its own exim configuration system, however, you can
implement a custom configuration in /etc/exim4/exim4.conf.  Therefore, follow the
following procedure for enabling the Exim4U exim configuration under Debian/Ubuntu:

	Copy the etc/exim directory and all of its contents from the Exim4U
	distribution to /etc/exim on the target Debian machine.  Then symbolically
	link /etc/exim/exim.conf to /etc/exim4/exim4.conf:

		ln -s /etc/exim/exim.conf /etc/exim4/exim4.conf

	Additionally, you may want to set dc_eximconfig_configtype=none in
        /etc/exim4/update-exim4.conf.conf to stop debconf from asking you questions
	about Debian's exim4 configuration.  Use "man update-exim4.conf" for more
	information.
	
	Debian will now execute the Exim4U exim configuration automatically.

Exim should be run under Debian/Ubuntu as the following ownership/group:

	user = Debian-exim
	group = Debian-exim

The mysql socket location under Debian/Ubuntu is:

	/var/run/mysqld/mysqld.sock

The mysql statement in exim4u_local.conf.inc should then be as follows:

	hide mysql_servers = <hostname>::(/var/run/mysqld/mysqld.sock)/exim4u/Debian-exim/<password>

Exim on Debian/Ubuntu runs as "exim4". Therefore the service for starting/stopping/restarting
exim is:

	/etc/init.d/exim4

2) EXIM4U WEB INTERFACE

Apache runs under Debian/Ubuntu as apache2.  Install apache2, php, perl and mysql with apt or aptitude.
You also need to install the db.php pear module which is referred to as php-pear-db in the INSTALL
file:

	pear install db

To list pear installs:

	pear list

The standard DocumentRoot for Debian/Ubuntu is typically /var/www or /home/www. Exim4U's INSTALL file
instructions locate the web interface's DocumentRoot at /home/exim4u/public_html which is standard
for RedHat/CentOS. Nevertheless, you may relocate the DocumentRoot to any other directory that you
prefer.



PYZOR:

Pyzor error in FreeBSD 8.0 when running "pyzor discover":

[root@host3 /usr/ports/databases/py-gdbm]# pyzor discover
/usr/local/lib/python2.6/site-packages/pyzor/__init__.py:11: DeprecationWarning: the sha module is deprecated; use the hashlib module instead
  import sha
/usr/local/lib/python2.6/site-packages/pyzor/client.py:12: DeprecationWarning: the multifile module has been deprecated since Python 2.5
  import multifile

Pyzor will not run like this.`

Solved by changing the first line of /usr/local/bin/pyzor to:

	#!/usr/local/bin/python -Wignore::DeprecationWarning

See: http://www.gossamer-threads.com/lists/spamassassin/users/143921


