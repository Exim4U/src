function popup_imp(D,E,A,C){var F,G,H=$H(),B=new Date().getTime();A=Math.min(screen.height-75,A||500);E=Math.min(screen.width-75,E||600);F=D.indexOf("?");if(F!=-1){H=$H(D.toQueryParams());D=D.substring(0,F)}if(C){$H(C.toQueryParams()).each(function(I){H.set(I.key,unescape(I.value))})}H.set("uniq",B);G=window.open(D+"?"+H.toQueryString(),B,"toolbar=no,location=no,status=yes,scrollbars=yes,resizable=yes,width="+E+",height="+A+",left=0,top=0");if(!G){alert(IMP.text.popup_block)}else{if(Object.isUndefined(G.name)){G.name=B}if(Object.isUndefined(G.opener)){G.opener=self}G.focus()}};