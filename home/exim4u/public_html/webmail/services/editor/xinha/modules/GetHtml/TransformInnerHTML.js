function GetHtmlImplementation(A){this.editor=A}GetHtmlImplementation._pluginInfo={name:"GetHtmlImplementation TransformInnerHTML",version:"1.0",developer:"Nelson Bright",developer_url:"http://www.brightworkweb.com/",sponsor:"",sponsor_url:"",license:"htmlArea"};Xinha.RegExpCache=[/<\s*\/?([^\s\/>]+)[\s*\/>]/gi,/(\s+)_moz[^=>]*=[^\s>]*/gi,/\s*=\s*(([^'"][^>\s]*)([>\s])|"([^"]+)"|'([^']+)')/g,/\/>/g,/<(br|hr|img|input|link|meta|param|embed|area)((\s*\S*="[^"]*")*)>/g,/(<\w+\s+(\w*="[^"]*"\s+)*)(checked|compact|declare|defer|disabled|ismap|multiple|no(href|resize|shade|wrap)|readonly|selected)([\s>])/gi,/(="[^']*)'([^'"]*")/,/&(?=(?!(#[0-9]{2,5};|[a-zA-Z0-9]{2,6};|#x[0-9a-fA-F]{2,4};))[^<]*>)/g,/<\s+/g,/\s+(\/)?>/g,/\s{2,}/g,/\s+([^=\s]+)((="[^"]+")|([\s>]))/g,/\s+contenteditable(=[^>\s\/]*)?/gi,/((href|src)=")([^\s]*)"/g,/<\/?(div|p|h[1-6]|table|tr|td|th|ul|ol|li|blockquote|object|br|hr|img|embed|param|pre|script|html|head|body|meta|link|title|area|input|form|textarea|select|option)[^>]*>/g,/<\/(div|p|h[1-6]|table|tr|ul|ol|blockquote|object|html|head|body|script|form|select)( [^>]*)?>/g,/<(div|p|h[1-6]|table|tr|ul|ol|blockquote|object|html|head|body|script|form|select)( [^>]*)?>/g,/<(td|th|li|option|br|hr|embed|param|pre|meta|link|title|area|input|textarea)[^>]*>/g,/(^|<\/(pre|script)>)(\s|[^\s])*?(<(pre|script)[^>]*>|$)/g,/(<pre[^>]*>)([\s\S])*?(<\/pre>)/g,/(^|<!--[\s\S]*?-->)([\s\S]*?)(?=<!--[\s\S]*?-->|$)/g,/\S*=""/g,/<!--[\s\S]*?-->|<\?[\s\S]*?\?>|<\/?\w[^>]*>/g,/(^|<\/script>)[\s\S]*?(<script[^>]*>|$)/g];if(typeof RegExp.prototype.compile=="function"){for(var i=0;i<Xinha.RegExpCache.length;i++){Xinha.RegExpCache[i]=new RegExp().compile(Xinha.RegExpCache[i])}}Xinha.prototype.cleanHTML=function(A){var C=Xinha.RegExpCache;A=A.replace(C[0],function(D){return D.toLowerCase()}).replace(C[1]," ").replace(C[12]," ").replace(C[2],'="$2$4$5"$3').replace(C[21]," ").replace(C[11],function(D,F,E){return" "+F.toLowerCase()+E}).replace(C[3],">").replace(C[9],"$1>").replace(C[5],'$1$3="$3"$5').replace(C[4],"<$1$2 />").replace(C[6],"$1$2").replace(C[7],"&amp;").replace(C[8],"<").replace(C[10]," ");if(Xinha.is_ie&&C[13].test(A)){A=A.replace(C[13],"$1"+this.stripBaseURL(RegExp.$3)+'"')}if(this.config.only7BitPrintablesInURLs){if(Xinha.is_ie){C[13].test(A)}if(C[13].test(A)){try{A=A.replace(C[13],"$1"+decodeURIComponent(RegExp.$3).replace(/([^!-~]+)/g,function(D){return escape(D)})+'"')}catch(B){A=A.replace(C[13],"$1"+RegExp.$3.replace(/([^!-~]+)/g,function(D){return escape(D)})+'"')}}}return A};Xinha.indent=function(B,A){Xinha.__nindent=0;Xinha.__sindent="";Xinha.__sindentChar=(typeof A=="undefined")?"  ":A;var C=Xinha.RegExpCache;if(Xinha.is_gecko){B=B.replace(C[19],function(D){return D.replace(/<br \/>/g,"\n")})}B=B.replace(C[18],function(D){D=D.replace(C[20],function(F,E,G){string=G.replace(/[\n\r]/gi," ").replace(/\s+/gi," ").replace(C[14],function(J){if(J.match(C[16])){var I="\n"+Xinha.__sindent+J;Xinha.__sindent+=Xinha.__sindentChar;++Xinha.__nindent;return I}else{if(J.match(C[15])){--Xinha.__nindent;Xinha.__sindent="";for(var H=Xinha.__nindent;H>0;--H){Xinha.__sindent+=Xinha.__sindentChar}return"\n"+Xinha.__sindent+J}else{if(J.match(C[17])){return"\n"+Xinha.__sindent+J}}}return J});return E+string});return D});B=B.replace(/^\s*/,"").replace(/ +\n/g,"\n").replace(/[\r\n]+(\s+)<\/script>/g,"\n$1<\/script>");return B};Xinha.getHTML=function(I,H,F){var E="";var K=Xinha.RegExpCache;if(I.nodeType==11){var B=document.createElement("div");var J=I.insertBefore(B,I.firstChild);for(j=J.nextSibling;j;j=j.nextSibling){J.appendChild(j.cloneNode(true))}E+=J.innerHTML.replace(K[23],function(M){M=M.replace(K[22],function(N){if(/^<[!\?]/.test(N)){return N}else{return F.cleanHTML(N)}});return M})}else{var G=(I.nodeType==1)?I.tagName.toLowerCase():"";if(H){E+="<"+G;var D=I.attributes;for(i=0;i<D.length;++i){var L=D.item(i);if(!L.specified){continue}var C=L.nodeName.toLowerCase();var A=L.nodeValue;E+=" "+C+'="'+A+'"'}E+=">"}if(G=="html"){innerhtml=F._doc.documentElement.innerHTML}else{innerhtml=I.innerHTML}E+=innerhtml.replace(K[23],function(M){M=M.replace(K[22],function(N){if(/^<[!\?]/.test(N)){return N}else{if(!(F.config.htmlRemoveTags&&F.config.htmlRemoveTags.test(N.replace(/<([^\s>\/]+)/,"$1")))){return F.cleanHTML(N)}else{return""}}});return M});if(Xinha.is_ie){E=E.replace(/<li( [^>]*)?>/g,"</li><li$1>").replace(/(<(ul|ol)[^>]*>)[\s\n]*<\/li>/g,"$1").replace(/<\/li>([\s\n]*<\/li>)+/g,"</li>")}if(Xinha.is_gecko){E=E.replace(/<br \/>\n$/,"")}if(H){E+="</"+G+">"}E=Xinha.indent(E)}return E};